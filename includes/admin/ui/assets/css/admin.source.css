@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
    /* Accordion styles */
    /* Hide default summary marker */
    details summary::-webkit-details-marker {
        display: none;
    }
    details summary::marker {
        display: none;
    }
    /* Rotate chevron when open */
    details[open] summary .aa-chevron {
        transform: rotate(180deg);
    }
    /* Smooth transition for content */
    details > div {
        transition: opacity 0.2s ease-in-out;
    }

    /* ═══════════════════════════════════════════════════════════════
       CARD SYSTEM - Collapsible cards with overlay
    ═══════════════════════════════════════════════════════════════ */
    
    /* Card container - relative for overlay positioning */
    [data-aa-card] {
        @apply relative bg-white border border-gray-200 rounded-lg mb-2;
    }

    /* Card header - clickable toggle */
    [data-aa-card-toggle] {
        @apply px-4 py-3 cursor-pointer select-none;
        @apply text-gray-900 font-medium;
        @apply hover:bg-gray-50 transition-colors;
        @apply flex items-center justify-between;
    }

    /* Chevron indicator for card toggle */
    [data-aa-card-toggle]::after {
        content: '';
        @apply w-2 h-2 border-r-2 border-b-2 border-gray-400;
        @apply transform rotate-45 transition-transform duration-200;
    }

    [data-aa-card].is-open [data-aa-card-toggle]::after {
        @apply -rotate-[135deg];
    }

    /* Overlay - hidden by default, positioned absolutely */
    .aa-card-overlay {
        @apply hidden absolute left-0 right-0 top-full z-50;
        @apply bg-white border border-gray-200 border-t-0 rounded-b-lg shadow-lg;
    }

    /* Show overlay when card is open */
    [data-aa-card].is-open .aa-card-overlay {
        @apply block;
    }

    /* Card body inside overlay */
    .aa-card-body {
        @apply px-4 py-3 text-sm text-gray-600;
    }

    .aa-card-body > div {
        @apply py-1;
    }

    /* Add padding to appointments list when cards are open to prevent overlay from touching modal border */
    .aa-appointments-list:has([data-aa-card].is-open) {
        padding-bottom: 20px;
    }

    /* Grid container for cards - allow overflow for overlays */
    .aa-clients-grid {
        @apply relative;
        overflow: visible !important;
    }

    /* Action bar for clients module */
    .aa-clients-action-bar {
        @apply flex flex-wrap items-center gap-3 mb-4;
    }

    .aa-clients-search-input {
        @apply flex-1 min-w-[200px] px-3 py-2 text-sm;
        @apply border border-gray-300 rounded-lg;
        @apply focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none;
    }

    .aa-clients-new-button {
        @apply px-4 py-2 text-sm font-medium;
        @apply bg-blue-600 hover:bg-blue-700 text-white;
        @apply rounded-lg transition-colors;
    }

    .aa-clients-pagination {
        @apply flex items-center gap-1;
    }

    .aa-clients-pagination-button {
        @apply w-8 h-8 flex items-center justify-center;
        @apply text-gray-600 hover:bg-gray-100 rounded;
        @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent;
    }

    /* Edit button inside client cards */
    .aa-btn-editar-cliente {
        @apply mt-3 px-3 py-1.5 text-sm;
        @apply inline-flex items-center gap-1.5;
        @apply text-blue-600 hover:text-blue-700 hover:bg-blue-50;
        @apply border border-blue-200 rounded-md;
        @apply transition-colors cursor-pointer;
    }

    .aa-btn-editar-cliente svg {
        @apply w-4 h-4;
    }

    /* ═══════════════════════════════════════════════════════════════
       MODAL SYSTEM - Basic functional styles
    ═══════════════════════════════════════════════════════════════ */
    
    /* Modal root - fullscreen overlay container */
    .aa-modal-root {
        @apply fixed inset-0 z-[9999] flex items-center justify-center;
    }

    .aa-modal-root.hidden {
        display: none;
    }

    /* Overlay backdrop */
    .aa-modal-overlay {
        @apply absolute inset-0 bg-black/50;
    }

    /* Modal container */
    .aa-modal {
        @apply relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-auto;
    }

    /* Add padding-bottom to modal when one of the last 3 cards is open to prevent overlay from touching modal border */
    .aa-modal:has(.aa-appointments-list > [data-aa-card].is-open:nth-last-child(-n+3)) {
        padding-bottom: 180px;
    }

    /* Modal header */
    .aa-modal-header {
        @apply flex items-center justify-between px-4 py-3 border-b border-gray-200;
    }

    .aa-modal-title {
        @apply text-lg font-semibold text-gray-900 m-0;
    }

    .aa-modal-close {
        @apply p-1 text-gray-400 hover:text-gray-600 rounded transition-colors;
    }

    /* Modal body */
    .aa-modal-body {
        @apply px-4 py-4;
    }

    /* Modal footer */
    .aa-modal-footer {
        @apply px-4 py-3 border-t border-gray-200 bg-gray-50;
    }

    .aa-modal-footer:empty {
        @apply hidden;
    }

    /* Block body scroll when modal is open */
    body.aa-modal-open {
        @apply overflow-hidden;
    }

    /* ═══════════════════════════════════════════════════════════════
       FORM STYLES - Basic form elements for modals
    ═══════════════════════════════════════════════════════════════ */
    
    .aa-form-group {
        @apply mb-4;
    }

    .aa-form-group label {
        @apply block text-sm font-medium text-gray-700 mb-1;
    }

    .aa-form-group input {
        @apply w-full px-3 py-2 border border-gray-300 rounded-md text-sm;
        @apply focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none;
    }

    .aa-modal-actions {
        @apply flex justify-end gap-2;
    }

    .aa-btn-cancelar {
        @apply px-4 py-2 text-sm text-gray-600 hover:text-gray-800 rounded-md transition-colors;
    }

    .aa-btn-guardar {
        @apply px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors;
    }

    .aa-btn-guardar:disabled {
        @apply bg-blue-400 cursor-not-allowed;
    }

    /* Form status messages */
    .aa-form-status {
        @apply p-2 rounded text-sm mt-2;
    }

    .aa-form-error {
        @apply bg-red-50 text-red-700 border border-red-200;
    }

    .aa-form-success {
        @apply bg-green-50 text-green-700 border border-green-200;
    }

    /* ═══════════════════════════════════════════════════════════════
       POPOVER SYSTEM - Lightweight tooltips/popovers
    ═══════════════════════════════════════════════════════════════ */
    
    /* Popover container */
    .aa-popover {
        @apply absolute bg-gray-100 border border-gray-300 rounded-lg shadow-md;
        @apply px-3 py-2 text-xs text-gray-700;
        @apply z-[9998];
        max-width: 280px;
        min-width: 120px;
    }

    /* Popover title (optional, bold) */
    .aa-popover-title {
        @apply font-semibold text-gray-800 mb-1;
    }

    /* Popover content lines */
    .aa-popover-line {
        @apply text-gray-600 leading-relaxed;
    }

    .aa-popover-line + .aa-popover-line {
        @apply mt-0.5;
    }

    /* ═══════════════════════════════════════════════════════════════
       APPOINTMENTS STYLES
    ═══════════════════════════════════════════════════════════════ */
    
    .aa-appointments-pagination {
        margin-top: 15px;
    }

    /* ═══════════════════════════════════════════════════════════════
       TOOLBAR SYSTEM - Control bars for module views
    ═══════════════════════════════════════════════════════════════ */
    
    /* Toolbar container - flexible row with spacing */
    .aa-toolbar {
        @apply flex items-center justify-between gap-3;
        @apply px-3 py-2 mt-1 mx-1 mb-3;
    }

    /* ═══════════════════════════════════════════════════════════════
       DATE NAVIGATOR - Unified segmented control for date navigation
    ═══════════════════════════════════════════════════════════════ */
    
    /* Container: acts as a single visual unit */
    .aa-date-navigator {
        @apply inline-flex items-center;
        @apply bg-gray-50 border border-gray-200 rounded-lg;
        @apply overflow-hidden;
    }

    /* Navigation buttons (prev/next) - part of the capsule */
    .aa-date-nav-btn {
        @apply flex items-center justify-center;
        @apply w-8 h-8;
        @apply text-gray-500;
        @apply bg-transparent border-0;
        @apply transition-colors duration-150;
        @apply cursor-pointer;
    }

    .aa-date-nav-btn:hover {
        @apply bg-gray-100 text-gray-700;
    }

    .aa-date-nav-btn:focus {
        @apply outline-none ring-2 ring-blue-500 ring-inset;
    }

    .aa-date-nav-btn:active {
        @apply bg-gray-200;
    }

    /* Separators between segments */
    .aa-date-nav-prev {
        @apply border-r border-gray-200;
    }

    .aa-date-nav-next {
        @apply border-l border-gray-200;
    }

    /* Date input - center of the navigator */
    .aa-date-input {
        @apply w-28 h-8 px-2;
        @apply text-sm font-medium text-gray-700 text-center;
        @apply bg-transparent border-0;
        @apply cursor-pointer;
        @apply focus:outline-none focus:bg-white;
    }

    .aa-date-input::placeholder {
        @apply text-gray-400;
    }

    /* ═══════════════════════════════════════════════════════════════
       TOOLBAR ACTIONS - Right-side action buttons
    ═══════════════════════════════════════════════════════════════ */
    
    .aa-toolbar-actions {
        @apply flex items-center gap-1.5;
    }

    /* ═══════════════════════════════════════════════════════════════
       GHOST/TERTIARY BUTTONS - Low prominence, high availability
    ═══════════════════════════════════════════════════════════════ */
    
    .aa-btn-ghost {
        @apply flex items-center justify-center;
        @apply w-8 h-8;
        @apply text-gray-400;
        @apply bg-transparent border-0 rounded-md;
        @apply transition-colors duration-150;
        @apply cursor-pointer;
    }

    .aa-btn-ghost:hover {
        @apply bg-gray-100 text-gray-600;
    }

    .aa-btn-ghost:focus {
        @apply outline-none ring-2 ring-blue-500 ring-offset-1;
    }

    .aa-btn-ghost:active {
        @apply bg-gray-200 text-gray-700;
    }

    /* ═══════════════════════════════════════════════════════════════
       CREATE BUTTON - Moderate presence, not screaming
    ═══════════════════════════════════════════════════════════════ */
    
    .aa-btn-create {
        @apply inline-flex items-center gap-1.5;
        @apply h-8 px-3;
        @apply text-xs font-medium text-gray-600;
        @apply bg-white border border-gray-200 rounded-md;
        @apply transition-all duration-150;
        @apply cursor-pointer;
    }

    .aa-btn-create:hover {
        @apply bg-gray-50 border-gray-300 text-gray-700;
    }

    .aa-btn-create:focus {
        @apply outline-none ring-2 ring-blue-500 ring-offset-1;
    }

    .aa-btn-create:active {
        @apply bg-gray-100;
    }

    /* ═══════════════════════════════════════════════════════════════
       PRIMARY BUTTON - Main action, clear but not overwhelming
    ═══════════════════════════════════════════════════════════════ */
    
    .aa-btn-primary {
        @apply inline-flex items-center gap-1.5;
        @apply h-8 px-3;
        @apply text-xs font-medium text-white;
        @apply bg-blue-600 border border-blue-600 rounded-md;
        @apply transition-all duration-150;
        @apply cursor-pointer;
    }

    .aa-btn-primary:hover {
        @apply bg-blue-700 border-blue-700;
    }

    .aa-btn-primary:focus {
        @apply outline-none ring-2 ring-blue-500 ring-offset-1;
    }

    .aa-btn-primary:active {
        @apply bg-blue-800;
    }

    .aa-btn-primary:disabled {
        @apply bg-blue-400 border-blue-400 cursor-not-allowed;
    }
}

